{% extends 'base.html' %} {% load custom_filters %}
<!-- Load custom template tags and filters -->

{% block content %}
<div class="container mt-3">
  <h2>{{ model_name|capfirst }} List</h2>
  {% comment %} Add Navigation Baar {% endcomment %}
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <div class="container-fluid">
      <a class="navbar-brand" href="{% url 'base' %}">Home</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link active" aria-current="page" href="#">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#">Link</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Items
            </a>
            <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
              {% for model in view.models %}
            <li><a class="dropdown-item" href="{% url 'generic_list' model %}">{{ model }}</a></li>
            {% endfor %}
            </ul>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
          </li>
        </ul>
        <form class="d-flex">
          <form class="form-inline my-2 my-lg-0" method="GET">
          <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="q">
          <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
        </form>
      </div>
    </div>
  </nav>
  <div class="container">
    <div class="d-flex justify-content-start align-items-center align-btn">
      <a
        href="{% url 'generic_create' model_name=model_name %}"
        class="btn btn-primary mb-2 mr-2"
        >Add New {{ model_name|capfirst }}</a
      >
    </div>
  </div>
  <!-- Add a search form at the top of the table -->
  <table class="table">
    <thead>
      <tr>
        {% if field_labels %}
        <!-- Check if field labels are provided -->
        {% for field_name, field_label in field_labels %}
        <th><a href="#" class="sort-link" data-sort="{{ field_name }}">{{ field_name }}</th>
        <!-- Use custom filter to get attribute value by name -->
        {% endfor %} {% endif %}
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for item in page_obj %}
      <!-- Iterate over each item in the queryset -->
      <tr>
        {% for field_name, field_label in field_labels %}
        <td>{{ item|get_attr:field_name }}</td>
        <!-- Use custom filter to get attribute value by name -->
        {% endfor %}
        <td>
          <a
            href="{% url 'generic_update' model_name=model_name pk=item.pk %}"
            class="btn btn-info"
            >Edit</a
          >
          <a
            href="{% url 'generic_delete' model_name=model_name pk=item.pk %}"
            class="btn btn-danger"
            >Delete</a
          >
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
<center>
  <!-- Pagination Links -->
  <nav>
    <ul class="pagination">
      {% if page_obj.has_previous %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.previous_page_number }}"
          >Previous</a
        >
      </li>
      {% endif %} {% for num in page_obj.paginator.page_range %}
      <li class="page-item {% if num == page_obj.number %}active{% endif %}">
        <a class="page-link" href="?page={{ num }}">{{ num }}</a>
      </li>
      {% endfor %} {% if page_obj.has_next %}
      <li class="page-item">
        <a class="page-link" href="?page={{ page_obj.next_page_number }}"
          >Next</a
        >
      </li>
      {% endif %}
    </ul>
  </nav>
</center>
{% endblock %}
